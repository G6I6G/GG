<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Морской бой онлайн</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="hero">
    <div>
      <p class="eyebrow">Real-time WebSocket Battles</p>
      <h1>Морской бой</h1>
      <p class="lede">Подключайтесь к комнате, размещайте флот и сражайтесь с соперником в реальном времени. Работает через WebSocket, с локальным резервом для тестов в одной вкладке.</p>
      <div class="hero-actions">
        <button id="connect-btn">Быстрое подключение</button>
        <button id="local-demo">Локальный спарринг</button>
      </div>
    </div>
    <div class="hero-panel">
      <div class="pill" id="connection-pill">Оффлайн</div>
      <div class="meta">Комната: <span id="room-label">не подключено</span></div>
      <div class="meta">Вы: <span id="player-label">гость</span></div>
      <div class="meta">Статус: <span id="status-label">ожидание</span></div>
      <div class="mini-form">
        <label>Имя</label>
        <input id="name-input" type="text" placeholder="Адмирал" />
      </div>
      <div class="mini-form">
        <label>Код комнаты</label>
        <input id="room-input" type="text" placeholder="public" />
      </div>
      <div class="mini-form">
        <label>Режим связи</label>
        <div class="radio-row">
          <label><input type="radio" name="link-mode" value="local" checked /> Локальный (две вкладки)</label>
          <label><input type="radio" name="link-mode" value="ws" /> WebSocket</label>
        </div>
        <input id="ws-url" type="text" placeholder="ws://localhost:8787 (опционально)" />
      </div>
    </div>
  </header>

  <main class="layout">
    <section class="panel board-panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Ваш флот</p>
          <h2>Поле игрока</h2>
        </div>
        <div class="tag" id="placement-tag">Размещение кораблей</div>
      </div>
      <div class="shipyard" id="shipyard"></div>
      <div class="grid" id="player-grid" aria-label="Ваше поле"></div>
      <div class="control-row">
        <div class="toggles">
          <span>Ориентация:</span>
          <button id="orientation-btn" class="ghost">Горизонтально</button>
          <button id="auto-btn" class="ghost">Случайно</button>
        </div>
        <button id="ready-btn" disabled>Готов к бою</button>
      </div>
    </section>

    <section class="panel board-panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Противник</p>
          <h2>Вражеское поле</h2>
        </div>
        <div class="tag" id="turn-indicator">Ход не начат</div>
      </div>
      <div class="legend">Кликайте по клеткам, чтобы стрелять. Подсказки обновляются в реальном времени.</div>
      <div class="grid" id="opponent-grid" aria-label="Поле соперника"></div>
      <div class="legend" id="opponent-status">Ожидание подключений...</div>
    </section>
  </main>

  <section class="panel bottom-panel">
    <div class="log">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Журнал</p>
          <h2>Хроника боя</h2>
        </div>
      </div>
      <div id="log-stream"></div>
    </div>
    <div class="info">
      <h3>Как играть</h3>
      <ul>
        <li>Нажмите «Быстрое подключение» или введите код комнаты и имя, чтобы соединиться.</li>
        <li>Выберите корабль и нажмите на своё поле для его размещения. Используйте кнопку ориентации или случайной расстановки.</li>
        <li>Когда весь флот на месте, нажмите «Готов к бою». Ход начинает тот, кто зашёл первым.</li>
        <li>Стреляйте по полю противника. Попадания и промахи отображаются сразу, потопленные корабли подсвечиваются.</li>
      </ul>
      <p class="muted">Нет внешнего сервера? Игра автоматически переключится в локальный режим (BroadcastChannel) для теста между вкладками.</p>
    </div>
  </section>

  <script type="module" src="./src/main.js"></script>
</body>
</html>
